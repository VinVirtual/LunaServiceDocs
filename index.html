<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luna API Documentation</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1>Luna API Documentation</h1>
            <p>Comprehensive guide to integrating natural conversational AI with text and speech capabilities</p>
        </div>

        <!-- Mode Toggle Switch -->
        <div class="mode-toggle">
            <span class="mode-label active" id="ttt-label">Text-to-Text</span>
            <label class="toggle-switch">
                <input type="checkbox" id="mode-toggle">
                <span class="slider"></span>
            </label>
            <span class="mode-label" id="tts-label">Text-to-Speech</span>
        </div>

        <!-- Navigation -->
        <nav class="section-nav">
            <ul>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#code-examples">Code Examples</a></li>
                <li><a href="#basic-usage">Basic Usage</a></li>
                <li><a href="#advanced-usage">Advanced Usage</a></li>
                <li><a href="#api-reference">API Reference</a></li>
            </ul>
        </nav>

        <!-- Overview Section -->
        <div class="documentation-section" id="overview">
            <h2>Overview</h2>
            <p id="overview-content" class="fade">
                The Luna Text API provides a seamless way to interact with Luna AI platform, enabling natural text-based conversations. 
            </p>
        </div>

        <!-- Features Section -->
        <div class="documentation-section" id="features">
            <h2>Features</h2>
            <div class="features-grid" id="features-content">
                <div class="feature-card">
                    <h3>Natural Conversations</h3>
                    <p>Engage users with human-like interactions through text responses</p>
                </div>
                <div class="feature-card">
                    <h3>Contextual Understanding</h3>
                    <p>Support for message history to maintain conversation context</p>
                </div>
                <div class="feature-card">
                    <h3>Secure Integration</h3>
                    <p>Built-in authentication and error handling</p>
                </div>
                <div class="feature-card">
                    <h3>Easy Integration</h3>
                    <p>Simple REST API with support for multiple languages</p>
                </div>
            </div>
        </div>

        <!-- Code Examples Section -->
<div class="documentation-section" id="code-examples">
    <h2>Code Examples</h2>
    <div class="code-container">
        <div class="code-tabs">
            <button class="tab-btn active">Shell</button>
            <button class="tab-btn">Python</button>
            <button class="tab-btn">JavaScript</button>
        </div>

        <div class="code-content active">
            <pre class="code-block"><code></code></pre>
            <button class="copy-btn">Copy</button>
        </div>
    </div>
</div>

        <!-- Basic Usage Section
        <div class="documentation-section" id="basic-usage">
            <h2>Basic Usage (Without Message History)</h2>
            <p>The simplest way to use Luna AI is without message history, which starts a fresh conversation:</p>
            <div class="code-section">
                <pre><code>import requests
import base64

api_key = "YOUR_API_KEY"
response = chat_with_luna(
    "Hey Luna, what do you think about AI music?", 
    api_key
)</code></pre>
                <button class="copy-btn">Copy</button>
            </div>
        </div> -->

        <!-- Advanced Usage Section -->
        <div class="documentation-section" id="advanced-usage">
            <h2 class="collapsible-header">Advanced Usage (With Message History) <span class="toggle-icon">▶</span></h2>
            <div class="collapsible-content">
                <p>Example python code to maintain context across multiple interactions, you can provide conversation history:</p>
                <div class="code-section">
                    <pre><code>import requests

url = "http://localhost:3000/api/v1/text/chat"
headers = {
    "Authorization": "Bearer your_api_key_here",
    "Content-Type": "application/json"
}

message_history = [
    {
        "role": "user",
        "content": "Hello what is the biggest state in America?"
    },
    {
        "role": "assistant",
        "content": "The biggest state in America is Alaska..."
    },
    {
        "role": "user",
        "content": "What is 5+5?"
    },
    {
        "role": "assistant",
        "content": "5 + 5 = 10"
    }
]

data = {
    "text": "Hey Luna, tell me what questions did I ask you.",
    "messageHistory": message_history
}

response = requests.post(url, json=data, headers=headers)

if response.status_code == 200:
    print(response.json())
else:
    print("Error:", response.status_code, response.text)</code></pre>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>
        </div>
        <!-- Basic Usage Section -->
        <div class="documentation-section" id="basic-usage">
            <h2 class="collapsible-header">Convert Base64 to WAV Conversations <span class="toggle-icon">▶</span></h2>
            <div class="collapsible-content">
                <p>Example python code to sends a chat request to Luna's API with message history, retrieves both text and base64-encoded audio responses, converts the audio to a WAV file, and saves it locally for playback</p>
                <div class="code-section">
                    <pre><code>import requests
import base64

def save_base64_to_wav(base64_string, output_filename="output.wav"):
    """Convert a base64-encoded audio string to a WAV file."""
    try:
        audio_data = base64.b64decode(base64_string)
        with open(output_filename, "wb") as audio_file:
            audio_file.write(audio_data)
        print(f"Audio saved as {output_filename}")
    except Exception as e:
        print("Error decoding audio:", e)

url = "http://localhost:3000/api/v1/speech/chat"
headers = {
    "Authorization": "Bearer d6973887-3024-480d-a099-51f9948fc3a6",
    "Content-Type": "application/json"
}
data = {
    "text": "Hello Luna, how are you?",
    "messageHistory": []
}

response = requests.post(url, json=data, headers=headers)

if response.status_code == 200:
    result = response.json()
    print("Luna's response:", result['text'])

    save_base64_to_wav(result['audio'], "luna_response.wav")
else:
    print("Error:", response.status_code, response.text)</code></pre>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>
        </div>


        <!-- API Reference Section -->
        <div class="documentation-section" id="api-reference">
            <h2>API Reference</h2>
            <h3>Parameters</h3>
            <table class="parameter-table">
                <tr>
                    <th>Parameter</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>text</td>
                    <td>str</td>
                    <td>The input text message to send to Luna AI</td>
                </tr>
                <tr>
                    <td>api_key</td>
                    <td>str</td>
                    <td>Your Luna API authentication key</td>
                </tr>
                <tr>
                    <td>message_history</td>
                    <td>list</td>
                    <td>Optional. Previous conversation history in a specific format</td>
                </tr>
            </table>

            <div class="note-box">
                <strong>Note:</strong> The audio file is overwritten with each new response. Consider implementing custom file naming if you need to preserve multiple responses.
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>